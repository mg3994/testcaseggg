{"version":3,"file":"web-preview.js","mappings":"sEACA,SAAiB,C,GCAbA,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaE,QAGrB,IAAIC,EAASN,EAAyBE,GAAY,CAGjDG,QAAS,CAAC,GAOX,OAHAE,EAAoBL,GAAUI,EAAQA,EAAOD,QAASJ,GAG/CK,EAAOD,OACf,CCrBAJ,EAAoBO,EAAI,CAACH,EAASI,KACjC,IAAI,IAAIC,KAAOD,EACXR,EAAoBU,EAAEF,EAAYC,KAAST,EAAoBU,EAAEN,EAASK,IAC5EE,OAAOC,eAAeR,EAASK,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDT,EAAoBU,EAAI,CAACK,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFhB,EAAoBoB,EAAKhB,IACH,oBAAXiB,QAA0BA,OAAOC,aAC1CX,OAAOC,eAAeR,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DZ,OAAOC,eAAeR,EAAS,aAAc,CAAEmB,OAAO,GAAO,E,MCL9D,OAEA,MAAMC,EAAUC,OAAiC,mBAYjDC,SAASC,cAAc,SAAUC,UAAY,kIAQ7C,MAAMC,EAAaC,iBAAiBJ,SAASK,iBAAiBC,iBAC5D,8BAEIC,EAAeP,SAASQ,eAAe,gBACvCC,EAAM,IAAIC,IAAIX,OAAOY,YAC3BF,EAAIG,aAAaC,OAAO,WAAY,KACpCJ,EAAIG,aAAaC,OAAO,kBAAmBV,GAC3CM,EAAIG,aAAaC,OAAO,cAAed,OAAOe,aAE9CP,EAAaQ,OAAS,KACpBR,EAAaS,cAAeC,YAC1B,CACEC,KAAM,aACNC,OAAQnB,SAASK,gBAAgBe,MAAMC,SAEzC,IACD,EAIHtB,OAAOuB,iBAAiB,WAAWC,IAGjC,GAAIA,EAAMC,SAAWjB,EAAaS,cAChClB,EAAOmB,YAAYM,EAAME,MACzBC,QAAQC,IAAI,0DACP,CACL,GAMJ,SAAqCJ,GACnC,MAAM,KAACL,GAAQK,EAAME,MAAQ,CAAC,EAC9B,MAAa,iBAATP,IACFX,EAAaS,cAAeC,YAC1B,CACEC,KAAM,aACNC,OAAQnB,SAASK,gBAAgBe,MAAMC,SAEzC,MAEK,EAGX,CAnBQO,CAA4BL,GAAQ,OACxChB,EAAaS,eAAeC,YAAYM,EAAME,MAC9CC,QAAQC,IAAI,qDACd,KAmBFpB,EAAasB,IAAMpB,EAAIqB,I","sources":["webpack://monospace/./webviews/preview.entry.scss?94a0","webpack://monospace/webpack/bootstrap","webpack://monospace/webpack/runtime/define property getters","webpack://monospace/webpack/runtime/hasOwnProperty shorthand","webpack://monospace/webpack/runtime/make namespace object","webpack://monospace/./webviews/preview.entry.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import './preview.entry.scss';\n\nconst vscode = (window as any)['acquireVsCodeApi']();\n\ntype ScriptGlobals = {\n  remotePath: string;\n  projectRoot: string;\n};\n\ndeclare global {\n  interface Window extends ScriptGlobals {}\n}\n\n// Set up iframe for the previewserver\ndocument.querySelector('#root')!.innerHTML = `\n  <iframe\n      id=\"previewFrame\"\n      src=\"about:blank\"\n      style=\"width:100%; height:100%;\"\n      frameborder=\"0\">\n`;\n\nconst background = getComputedStyle(document.documentElement).getPropertyValue(\n  '--vscode-editor-background'\n);\nconst previewFrame = document.getElementById('previewFrame')! as HTMLIFrameElement;\nconst url = new URL(window.remotePath);\nurl.searchParams.append('embedded', '1');\nurl.searchParams.append('backgroundColor', background);\nurl.searchParams.append('projectRoot', window.projectRoot);\n\npreviewFrame.onload = () => {\n  previewFrame.contentWindow!.postMessage(\n    {\n      type: 'rootStyles',\n      styles: document.documentElement.style.cssText,\n    },\n    '*'\n  );\n};\n\n// Prepare message-proxying between previewserver <-> VSC\nwindow.addEventListener('message', event => {\n  // TODO: disambiguate which direction to forward messages, i.e. previewserver <-> VSC\n  // forward all messages to parent\n  if (event.source === previewFrame.contentWindow) {\n    vscode.postMessage(event.data);\n    console.log('[monospace extension] message proxy: iframe -> VSC');\n  } else {\n    if (maybeHandleExtensionMessage(event)) return;\n    previewFrame.contentWindow?.postMessage(event.data);\n    console.log('[monospace extension] message proxy: VSC -> iframe');\n  }\n});\n\nfunction maybeHandleExtensionMessage(event: MessageEvent): boolean {\n  const {type} = event.data || {};\n  if (type === 'updateStyles') {\n    previewFrame.contentWindow!.postMessage(\n      {\n        type: 'rootStyles',\n        styles: document.documentElement.style.cssText,\n      },\n      '*'\n    );\n    return true;\n  }\n  return false;\n}\n\n// Load previewserver into iframe\npreviewFrame.src = url.href;\n"],"names":["__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","vscode","window","document","querySelector","innerHTML","background","getComputedStyle","documentElement","getPropertyValue","previewFrame","getElementById","url","URL","remotePath","searchParams","append","projectRoot","onload","contentWindow","postMessage","type","styles","style","cssText","addEventListener","event","source","data","console","log","maybeHandleExtensionMessage","src","href"],"sourceRoot":""}
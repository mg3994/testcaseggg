/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var b=["vs/code/browser/workbench/workbench","require","exports","vs/base/browser/browser","vs/base/common/buffer","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/marshalling","vs/base/common/network","vs/base/common/path","vs/base/common/resources","vs/base/common/strings","vs/base/common/uri","vs/platform/product/common/product","vs/platform/window/common/window","vs/workbench/workbench.web.main"],I=function(g){for(var u=[],f=0,m=g.length;f<m;f++)u[f]=b[g[f]];return u};define(b[0],I([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),function(g,u,f,m,E,R,O,d,w,v,A,h,S,l,C){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.LocalStorageSecretStorageProvider=void 0;class T{async seal(e){return e}async unseal(e){return e}}var U;(function(n){n.ALGORITHM="AES-GCM",n[n.KEY_LENGTH=256]="KEY_LENGTH",n[n.IV_LENGTH=12]="IV_LENGTH"})(U||(U={}));class ${static supported(){return!!crypto.subtle}constructor(e){this.d=e}async seal(e){const t=window.crypto.getRandomValues(new Uint8Array(12)),r=await window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),s=new Uint8Array(await window.crypto.subtle.exportKey("raw",r)),o=await this.f(s),i=new TextEncoder().encode(e),y=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:t},o,i),c=new Uint8Array([...s,...t,...new Uint8Array(y)]);return(0,m.$te)(m.$_d.wrap(c))}async unseal(e){const t=(0,m.$se)(e);if(t.byteLength<60)throw Error("Invalid length for the value for credentials.crypto");const r=256/8,s=t.slice(0,r),o=t.slice(r,r+12),i=t.slice(r+12),y=await this.f(s.buffer),c=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:o.buffer},y,i.buffer);return new TextDecoder().decode(new Uint8Array(c))}async f(e){if(!e||e.byteLength!==256/8)throw Error("Invalid length for clientKey");const t=await this.g(),r=new Uint8Array(256/8);for(let s=0;s<r.byteLength;s++)r[s]=e[s]^t[s];return window.crypto.subtle.importKey("raw",r,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}async g(){if(this.c)return this.c;let e=0,t;for(;e<=3;)try{const r=await fetch(this.d,{credentials:"include",method:"POST"});if(!r.ok)throw new Error(r.statusText);const s=new Uint8Array(await await r.arrayBuffer());if(s.byteLength!==256/8)throw Error("The key retrieved by the server is not 256 bit long.");return this.c=s,this.c}catch(r){t=r,e++,await new Promise(s=>setTimeout(s,e*e*100))}throw t}}class k{constructor(e){this.f=e,this.c="secrets.provider",this.d=this.g(),this.type="persisted"}async g(){const e=this.h(),t=window.localStorage.getItem(this.c);if(t)try{const r=JSON.parse(await this.f.unseal(t));return{...e,...r}}catch(r){console.error("Failed to decrypt secrets from localStorage",r),window.localStorage.removeItem(this.c)}return e}h(){let e;const t=document.getElementById("vscode-workbench-auth-session"),r=t?t.getAttribute("data-settings"):void 0;if(r)try{e=JSON.parse(r)}catch{}if(!e)return{};const s={};if(s[`${S.default.urlProtocol}.loginAccount`]=JSON.stringify(e),e.providerId!=="github")return console.error(`Unexpected auth provider: ${e.providerId}. Expected 'github'.`),s;const o=JSON.stringify({extensionId:"vscode.github-authentication",key:"github.auth"});return s[o]=JSON.stringify(e.scopes.map(i=>({id:e.id,scopes:i,accessToken:e.accessToken}))),s}async get(e){return(await this.d)[e]}async set(e,t){const r=await this.d;r[e]=t,this.d=Promise.resolve(r),this.j()}async delete(e){const t=await this.d;delete t[e],this.d=Promise.resolve(t),this.j()}async j(){try{const e=await this.f.seal(JSON.stringify(await this.d));window.localStorage.setItem(this.c,e)}catch(e){console.error(e)}}}u.LocalStorageSecretStorageProvider=k;class p extends R.$Qc{static{this.c=0}static{this.f=["scheme","authority","path","query","fragment"]}constructor(e){super(),this.r=e,this.g=this.B(new E.$Ld),this.onCallback=this.g.event,this.h=new Set,this.j=Date.now(),this.m=void 0}create(e={}){const t=++p.c,r=[`vscode-reqid=${t}`];for(const s of p.f){const o=e[s];o&&r.push(`vscode-${s}=${encodeURIComponent(o)}`)}if(!(e.authority==="vscode.github-authentication"&&e.path==="/dummy")){const s=`vscode-web.url-callbacks[${t}]`;window.localStorage.removeItem(s),this.h.add(t),this.s()}return h.URI.parse(window.location.href).with({path:this.r,query:r.join("&")})}s(){if(this.n)return;const e=()=>this.u();window.addEventListener("storage",e),this.n={dispose:()=>window.removeEventListener("storage",e)}}t(){this.n?.dispose(),this.n=void 0}async u(){const e=Date.now()-this.j;e>1e3?this.w():this.m===void 0&&(this.m=setTimeout(()=>{this.m=void 0,this.w()},1e3-e))}w(){let e;for(const t of this.h){const r=`vscode-web.url-callbacks[${t}]`,s=window.localStorage.getItem(r);if(s!==null){try{this.g.fire(h.URI.revive(JSON.parse(s)))}catch(o){console.error(o)}e=e??new Set(this.h),e.delete(t),window.localStorage.removeItem(r)}}e&&(this.h=e,this.h.size===0&&this.t()),this.j=Date.now()}}class a{static{this.c="ew"}static{this.d="folder"}static{this.f="workspace"}static{this.g="payload"}static create(e){let t=!1,r,s=Object.create(null);return new URL(document.location.href).searchParams.forEach((i,y)=>{switch(y){case a.d:if(e.remoteAuthority&&i.startsWith(w.$ec.sep))r={folderUri:h.URI.from({scheme:d.Schemas.vscodeRemote,path:i,authority:e.remoteAuthority})};else{const c=h.URI.parse(i);if(c.scheme!==d.Schemas.vscodeUserData)break;r={folderUri:c}}t=!0;break;case a.f:if(e.remoteAuthority&&i.startsWith(w.$ec.sep))r={workspaceUri:h.URI.from({scheme:d.Schemas.vscodeRemote,path:i,authority:e.remoteAuthority})};else{const c=h.URI.parse(i);if(c.scheme!==d.Schemas.vscodeUserData)break;r={workspaceUri:c}}t=!0;break;case a.c:r=void 0,t=!0;break;case a.g:try{s=(0,O.$hh)(i),s=s.filter(([c,N])=>c!=="openFile"||h.URI.parse(N||"").scheme===d.Schemas.vscodeRemote)}catch(c){console.error(c)}break}}),t||(e.folderUri?r={folderUri:h.URI.revive(e.folderUri)}:e.workspaceUri&&(r={workspaceUri:h.URI.revive(e.workspaceUri)})),new a(r,s,e)}constructor(e,t,r){this.workspace=e,this.payload=t,this.h=r,this.trusted=!0}async open(e,t){if(t?.reuse&&!t.payload&&this.l(this.workspace,e))return!0;const r=this.j(e,t);if(r){if(t?.reuse)return window.location.href=r,!0;{let s;return(0,f.$mO)()?s=window.open(r,"_blank","toolbar=no"):s=window.open(r),!!s}}return!1}j(e,t){let r;if(!e)r=`${document.location.origin}${document.location.pathname}?${a.c}=true`;else if((0,l.$VC)(e)){const s=this.k(e.folderUri);r=`${document.location.origin}${document.location.pathname}?${a.d}=${s}`}else if((0,l.$UC)(e)){const s=this.k(e.workspaceUri);r=`${document.location.origin}${document.location.pathname}?${a.f}=${s}`}return t?.payload&&(r+=`&${a.g}=${encodeURIComponent(JSON.stringify(t.payload))}`),r}k(e){return this.h.remoteAuthority&&e.scheme===d.Schemas.vscodeRemote?encodeURIComponent(`${w.$ec.sep}${(0,A.$He)(e.path,w.$ec.sep)}`).replaceAll("%2F","/"):encodeURIComponent(e.toString(!0))}l(e,t){return!e||!t?e===t:(0,l.$VC)(e)&&(0,l.$VC)(t)?(0,v.$lg)(e.folderUri,t.folderUri):(0,l.$UC)(e)&&(0,l.$UC)(t)?(0,v.$lg)(e.workspaceUri,t.workspaceUri):!1}hasRemote(){if(this.workspace){if((0,l.$VC)(this.workspace))return this.workspace.folderUri.scheme===d.Schemas.vscodeRemote;if((0,l.$UC)(this.workspace))return this.workspace.workspaceUri.scheme===d.Schemas.vscodeRemote}return!0}}function L(n){const e=document.cookie.split("; ");for(const t of e)if(t.startsWith(n+"="))return t.substring(n.length+1)}(function(){const n=document.getElementById("vscode-workbench-web-configuration"),e=n?n.getAttribute("data-settings"):void 0;if(!n||!e)throw new Error("Missing web configuration element");const t=JSON.parse(e),r=L("vscode-secret-key-path"),s=r&&$.supported()?new $(r):new T,o={remoteAuthority:window.location.host,developmentOptions:t.developmentOptions,settingsSyncOptions:t.settingsSyncOptions,folderUri:t.folderUri,workspaceUri:t.workspaceUri,callbackRoute:t.callbackRoute};(0,C.create)(document.body,{...o,windowIndicator:o.windowIndicator??{label:"$(remote)",tooltip:`${S.default.nameShort} Web`},settingsSyncOptions:o.settingsSyncOptions?{enabled:o.settingsSyncOptions.enabled}:void 0,developmentOptions:{...o.developmentOptions},workspaceProvider:a.create(o),urlCallbackProvider:new p(o.callbackRoute),secretStorageProvider:o.remoteAuthority&&!r?void 0:new k(s)})})()})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/70b3ad99742f399fee08e39534bf7e649b81921a/core/vs/code/browser/workbench/workbench.js.map
